*** Settings ***
Library           Selenium2Library
Suite Teardown	  Close All Browsers
Resource          ../../resources/navbar/navbar_resource.txt

*** Test Cases ***

Username displayed on MyBlue App
	[Tags]		UsernameTest
    Given I am logged into the MyBlue Portal
    Reload Page
    Then I should see the element "span.username" displayed

Username displayed on Partner site
	[Tags]		UsernameTest
    When I Click the "#personalHealthRecord" link
    @{windows}=					Get Window Titles		
	Select Window				@{windows}[1]
	Sleep						5	
    Then I should see the element "span.username" displayed
    Teardown Browser
    
#US536 Test Cases   
Wellness links Not displayed For Terminated User
	[Tags]		TerminatedWellnesslinksTest
    Given I am a logged in MyBlue Member With Plan Type is Terminated
    Then I should not see the element "a.hearticon" displayed
    Teardown Browser
   
Wellness links displayed For Not Terminated User
	[Tags]		OtherWellnesslinksTest
    Given I am a logged in MyBlue Member With Plan Type is not Terminated
    Then I should see the element "a.hearticon" displayed
	
	    
Wellness Menu links displayed For Not Terminated User
	[Tags]		OtherWellnessMenulinksTest
    Given I am a logged in MyBlue Member With Plan Type is not Terminated (Session exists)
    When I Click the "a.hearticon" link  
    Then I should see the element "#wellnessCardBalance" displayed
    And I should see the element "#newWellnessCard" displayed
    And I should see the element "#reportStolenCard" displayed
    And I should see the element "#faqs" displayed
    

View Wellness Card Balance link Navigates to View Wellness Card Page
	[Tags]		ViewWellnessCardlinkTest
    Given I am a logged in MyBlue Member With Plan Type is not Terminated (Session exists)
    And I Click the "a.hearticon" link
    Sleep		5
    When I Click the "#wellnessCardBalance a" link
    Sleep		5  
    Then I should be navigated to "https://fepdemo.mychiprewards.com/Cards/Account"
    
    
New Wellness Card link Navigates to New Wellness Card Page
	[Tags]		NewWellnessCardlinkTest
    Given I am a logged in MyBlue Member With Plan Type is not Terminated (Session exists)
    And I Click the "a.hearticon" link
    Sleep		5
    When I Click the "#newWellnessCard a" link
    Sleep		5  
    Then I should be navigated to "https://fepdemo.mychiprewards.com/Home/Contact"
    

Report Stolen Card link Navigates to Report Stolen Card Page
	[Tags]		ReportStolenCardlinkTest
    Given I am a logged in MyBlue Member With Plan Type is not Terminated (Session exists)
    And I Click the "a.hearticon" link
    Sleep		5
    When I Click the "#reportStolenCard a" link
    Sleep		5  
    Then I should be navigated to "https://fepdemo.mychiprewards.com/Home/Contact"
    

FAQS link Navigates to FAQS Page
	[Tags]		FaqslinkTest
    Given I am a logged in MyBlue Member With Plan Type is not Terminated (Session exists)
    And I Click the "a.hearticon" link
    Sleep		5
    When I Click the "#faqs a" link
    Sleep		5  
    Then I should be navigated to "http://www.fepblue.org/faqs/index.jsp"
    
    
Inbox Menu links displayed For Not Terminated User
	[Tags]		InboxMenulinksTest
    Given I am a logged in MyBlue Member With Plan Type is not Terminated (Session exists)
    When I Click the "a.mailicon" link  
    Then I should see the element "#nurseLineInbox" displayed
    And I should see the element "#customerServiceInbox" displayed
    
###Clicking accept to a security warning causes this test to fail, 
###Also fails because of a web driver issue (screenshot related)   
#Customer Service Inbox link Navigates to Customer Service Inbox Page
#	[Tags]		CustomerServiceInboxlinkTest
#    Given I am a logged in MyBlue Member With Plan Type is not Terminated
#    And I Click the "a.mailicon" link
#    Sleep		1
#    When I Click the "#customerServiceInbox a" link
#    Sleep		10  
#    Then I should be navigated to "http://custservv2.fepblue.org/"
    

Nurse Line Inbox link Navigates to Nurse Line Inbox Page
	[Tags]		NurseLineInboxlinkTest
    Given I am a logged in MyBlue Member With Plan Type is not Terminated (Session exists)
    And I Click the "a.mailicon" link
    Sleep		5
    When I Click the "#nurseLineInbox a" link
    Sleep		5  
    Then I should be navigated to "https://staging.webmdhealth.com/Registration/SecondFactorAuthentication.aspx/Sso"
    Teardown Browser


#US738 Test cases
Change Your Email Address link in user drop down menu
   [Tags]		TestUsernameDropdown
   Given I am logged into the MyBlue Portal
   Reload Page
   When I click the "li#Username" element
   Then I should see the element "li[data-url-config="navigation.main.selfMenu.nodes.changeYourEmailAddress"]" displayed
   
   
Change Your Password link in user drop down menu
   [Tags]		TestUsernameDropdown
   Then I should see the element "li[data-url-config="navigation.main.selfMenu.nodes.changeYourPassword"]" displayed
   
   
Change Your Username link in user drop down menu
   [Tags]		TestUsernameDropdown
   Then I should see the element "li[data-url-config="navigation.main.selfMenu.nodes.changeYourUsername"]" displayed
   Teardown Browser


#US764 - Post Navigation Test
M. Post-Navigation Interstitial Legal Message
	[Tags]		PostNavigationInterstitial
	Given I am logged into the MyBlue Portal
	Reload Page
	When I click the "#health-tools" element
	And I click the "li[data-url-config="navigation.main.healthTools.nodes.nurseLine"] a" element
	Then I should see the element ".col-xs-10" displayed
	
M. Post-Navigation Interstitial Legal Message Text
	[Tags]		PostNavigationInterstitial
	Then I should see ".col-xs-10" have the text "You have accessed a third party website. " displayed

#US757
M. Post-Navigation Interstitial Legal Message link
	[Tags]		PostNavigationInterstitial
	Then I should see ".col-xs-10 p a" have the text "View Privacy Policy" displayed
	
M. Post-Navigation Interstitial Legal Message More Details
	[Tags]		PostNavigationInterstitial
	When I click the ".icon.arrow" element
	Sleep		3
	Then I should see ".col-xs-10" have the text "This web site is operated on behalf of FEP by a third party.The protection of your privacy will be governed by the privacy policy of this site. Please review the site's terms of use and privacy policy for details." displayed
	Teardown Browser
	

#US767 - CSR Nav
As a CSR, I should see the wellness icon disabled
	[Tags]		CSR
	Given I am logged in CSR
	Then I should see the element "#Wellness[class=\"disable\"]" disabled
	
As a CSR, I should see the FEP Blue link disabled
	[Tags]		CSR
	Then I should see the element "#fep-blue[class=\"disable\"]" disabled
	
As a CSR, I should see the Pharmacy link disabled
	[Tags]		CSR
	Then I should see the element "#pharmacy[class=\"disable\"]" disabled
	
As a CSR, I should see the Health Tools link disabled
	[Tags]		CSR
	Then I should see the element "#health-tools[class=\"disable\"]" disabled
	
As a CSR, I should see the My Blue link disabled
	[Tags]		CSR
	Then I should see the element "#my-blue[class=\"disable\"]" disabled
	
As a CSR, I should see the My Account link enabled and active
	[Tags]		CSR
	Then I should not see the element "#my-account[class=\"disable\"]" disabled

As a CSR, I should not be redirected when I click the wellness icon
	[Tags]		CSR
	When I Click the "#Wellness[class=\"disable\"]" element
	Then I should not be redirected off the page "${MYBLUE_CSR_NAV}"
	
As a CSR, I should not be redirected when I click the FEP Blue link
	[Tags]		CSR
	When I Click the "#fep-blue[class=\"disable\"]" element
	Then I should not be redirected off the page "${MYBLUE_CSR_NAV}"
	
As a CSR, I should not be redirected when I click the Pharmacy link
	[Tags]		CSR
	When I Click the "li[data-url-config=\"navigation.main.pharmacy\"] a" link
	Then I should not be redirected off the page "${MYBLUE_CSR_NAV}"
	
As a CSR, I should not be redirected when I click the Health Tools link
	[Tags]		CSR
	When I Click the "li#health-tools" element
	Then I should not be redirected off the page "${MYBLUE_CSR_NAV}"
	
As a CSR, I should not be redirected when I click the My Blue link
	[Tags]		CSR
	When I Click the "#my-blue[class=\"disable\"]" element
	Then I should not be redirected off the page "${MYBLUE_CSR_NAV}"
	
As a CSR, I should see the My Account drop down list
	[Tags]		CSR
	When I Click the "#my-account" element
	Then I should see the element "#my-account .cbp-hrsub" displayed
	Teardown Browser
	
	
#US758 - Update WebMD's Menu Look & Feel on the Navigation Bar
I should see the WebMd dropdown list
	[Tags]		WebMDLookAndFeel
	Given I am logged into the MyBlue Portal
	Reload Page
	When I click the "#health-tools" element
	Then I should see the element "#health-tools div .col-sm-4" displayed
	
I should see the link Tobacco Cessation
	[Tags]		WebMDLookAndFeel
	Then I should see the element "li[data-url-config=\"navigation.main.healthTools.nodes.tobaccoCessation\"]" displayed
	
I should see the link Nurse Line
	[Tags]		WebMDLookAndFeel
	Then I should see the element "li[data-url-config=\"navigation.main.healthTools.nodes.nurseLine\"]" displayed
	Teardown Browser
	
	
#US731 - Tour/Introduction to the new unified navigation
I should see the Tour/Introduction when I login for the first time
	[Tags]		Tour
	Given I am logged into the MyBlue Portal for the first time
	Then I should see the element ".intronavimg" displayed
	
I should see a close button
	[Tags]		Tour
	Then I should see the element ".intronavclose" displayed

I should not see the Tour/Introduction
	[Tags]		Tour
	When I Click the "a.intronavclose" link
	Sleep		2
	Then I should not see the element ".intronav" displayed
	
I should see the Tour/Introduction when I login for the first time on Mobile
	[Tags]		Tour
	Given I am on a mobile device
	And I navigate to "${NAVBAR_SAMPLE_URL}?showNavTour=true"
	Then I should see the element ".intronavimg" displayed
	
I should see a close button on Mobile
	[Tags]		Tour
	Then I should see the element ".intronavclose" displayed

I should not see the Tour/Introduction on Mobile
	[Tags]		Tour
	When I Click the "a.intronavclose" link
	Sleep		2
	Then I should not see the element ".intronav" displayed
	Teardown Browser
		