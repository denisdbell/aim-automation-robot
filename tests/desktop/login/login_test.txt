*** Settings ***
Library           Selenium2Library
Suite Setup		  Environment setup
Suite Teardown	  Teardown Browser
Resource          ../../../resources/login/login_resource.txt

*** Test Cases ***

Login Page Hot links Displayed
	[Tags]		LoginPageElements	Mobile
	Given I am a MyBlue Member on the Login Page
	Then I should see the element "form div:nth-child(5) a:nth-child(1)" displayed
	And I should see the element "form div:nth-child(5) a:nth-child(2)" displayed
	And I should see the element "form div:nth-child(5) a:nth-child(3)" displayed
	And I should see the element "#signup" displayed
	
Login Page Hot links have valid text
	[Tags]		LoginPageElements	Mobile
	Then I should see "form div:nth-child(5) a:nth-child(1)" have the text "username" displayed
	And I should see "form div:nth-child(5) a:nth-child(2)" have the text "password" displayed
	And I should see "form div:nth-child(5) a:nth-child(3)" have the text "e-mail address" displayed
	And I should see "#signup" have the text "Sign up for MyBlue" displayed
	
Login Page Username Textbox Displayed
	[Tags]		LoginPageElements	Mobile
	Then I should see the element "#LoginUsername" displayed
	And I should see the element "#LoginUsername" blank
	

Login Page Password Textbox Displayed
	[Tags]		LoginPageElements	Mobile
	Then I should see the element "#LoginPassword" displayed
	And I should see the element "#LoginPassword" blank
	
I should NOT see the unified navigation bar Displayed
	[Tags]		LoginPageElements	Mobile
	Then I should not see the element ".myblue-header-content .thirdparty" displayed
	Teardown Browser
	
	
#Test hot links
Username should take me to MyBlue
	[Tags]		HotLinks	Mobile
	Given I am a MyBlue Member on the Login Page
	When I Click the "form div:nth-child(5) a:nth-child(1)" link
	Then I should be navigated to "${MYBLUE_LOGIN_URL}?myBluePopUp=forgotUserName&callBackURL=${SERVER}"

Username should take me to MyBlue with popup
	[Tags]		HotLinks	Mobile
	Then I should see the element "#_58_usernamePopup" displayed
	
Username redirect to Mdot when I click cancel
	[Tags]		HotLinks	Mobile
	When I Click the "img[alt=\"Cancel\"]" element
	Then I should be navigated to "${SERVER}/login"

Password should take me to MyBlue
	[Tags]		HotLinks	Mobile
	When I Click the "form div:nth-child(5) a:nth-child(2)" link
	Then I should be navigated to "${MYBLUE_LOGIN_URL}?myBluePopUp=forgotPassword&callBackURL=${SERVER}"

Password should take me to MyBlue with popup
	[Tags]		HotLinks	Mobile
	Then I should see the element "#_58_passwordPopup" displayed
	
Password redirect to Mdot when I click cancel
	[Tags]		HotLinks	Mobile
	When I Click the "img[alt=\"Cancel\"]" element
	Then I should be navigated to "${SERVER}/login"
	
Email should take me to MyBlue
	[Tags]		HotLinks	Mobile
	When I Click the "form div:nth-child(5) a:nth-child(3)" link
	Then I should be navigated to "${MYBLUE_LOGIN_URL}?myBluePopUp=forgotEmailAddress&callBackURL=${SERVER}"

Email should take me to MyBlue with popup
	[Tags]		HotLinks	Mobile
	Then I should see the element "#_58_forgotEmailAddressPopup" displayed
	
Email redirect to Mdot when I click cancel
	[Tags]		HotLinks	Mobile
	When I Click the "#cancel_btn" element
	Then I should be navigated to "${SERVER}/login"
	
Sign up for MyBlue should take me to MyBlue
	[Tags]		HotLinks	Mobile
	When I Click the "#signup" link
	Then I should be navigated to "${MYBLUE_LOGIN_URL}?p_p_id=58&p_p_lifecycle=0&p_p_state=normal&p_p_mode=view&p_p_col_id=column-1&p_p_col_count=1&_58_struts_action=%2Flogin%2Fcreate_account"
	Teardown Browser


Valid Login
	[Tags]		ValidLoginTest	Mobile
    Given I am a MyBlue Member on the Login Page
    When I Enter A Username "#LoginUsername" "marchcontractuat"
    And I Enter A Password "#LoginPassword" "Bigfun21!"
    And I Click the "#login" Button
    Sleep				${NAVIGATION}
    Then I Am Navigated to Landing Page "div.myblue-header-content"
    Teardown Browser
        
        
Invalid Login With Invalid Password
	[Tags]		InvalidLoginTest	Mobile
    Given I am a MyBlue Member on the Login Page
    When I Enter A Username "#LoginUsername" "marchcontractuat"
    And I Enter A Password "#LoginPassword" "testPassword"
    And I Click the "#login" Button
    Sleep				${NAVIGATION}
    Then I Am Not Navigated to Landing Page "header[ng-show=\"page.header.visible\"]"
    And I should see the element "#errorMsg" displayed
    Teardown Browser


Invalid Login With Invalid Username
	[Tags]		InvalidLoginTest	Mobile
    Given I am a MyBlue Member on the Login Page
    When I Enter A Username "#LoginUsername" "testUserName"
    And I Enter A Password "#LoginPassword" "marchcontractuat"
    And I Click the "#login" Button
    Sleep				${NAVIGATION}
    Then I Am Not Navigated to Landing Page "header[ng-show=\"page.header.visible\"]"
    And I should see the element "#errorMsg" displayed
    Teardown Browser
	
I should see the loading popup when I click submit to login
	[Tags]		Loading		Mobile
	Given I am a MyBlue Member navigating to the login page
    Sleep				${NAVIGATION}
    When I Enter A Username "#LoginUsername" "marchcontractuat"
    And I Enter A Password "#LoginPassword" "Bigfun21!"
    And I Click the "#login" Button	
    I should see the loading popup visible
    Teardown Browser
    
    
#US369 - Forgot Username
Login Page Hot links Displayed
	[Tags]		ForgotUsername	Mobile
	Given I am a MyBlue Member on the Login Page
	When I click the "#forgotUsername" link
	Then I navigate to "${SERVER}/forgot/username"

I should see an email textbox
	[Tags]		ForgotUsername	Mobile
	Then I should see the element "#emailAddress" displayed
	
I should see a submit button
	[Tags]		ForgotUsername	Mobile
	Then I should see the element "#retrieveUsername" displayed
	
I should see a cancel button
	[Tags]		ForgotUsername	Mobile
	Then I should see the element "div.cancel" displayed
	
I should not see a disabled submit button when I enter a valid email address
	[Tags]		ForgotUsername	Mobile
	When I enter the text "a@a.c" in "#emailAddress" textbox
	Then I should not see the element "#retrieveUsername[disabled=\"disabled\"]" displayed
	
I should not see the modal when I click cancel
	[Tags]		ForgotUsername	Mobile
	When I click the "div.cancel a" link
	Then I navigate to "${SERVER}/login"
	Teardown Browser