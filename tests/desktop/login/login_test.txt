*** Settings ***
Library           Selenium2Library
Suite Setup		  Environment setup
Suite Teardown	  Teardown Browser
Resource          ../../../resources/login/login_resource.txt

*** Test Cases ***

Login Page Hot links Displayed
	[Tags]		LoginPageElements	Mobile
	Given I am a MyBlue Member on the Login Page
	Then I should see the element "#forgotUsername" displayed
	And I should see the element "#forgotPassword" displayed
	And I should see the element "#forgotEmailAddress" displayed
	And I should see the element "#signup" displayed
	
Login Page Hot links have valid text
	[Tags]		LoginPageElements	Mobile
	Then I should see "#forgotUsername" have the text "Forgot your username?" displayed
	And I should see "#forgotPassword" have the text "Forgot your password?" displayed
	And I should see "#forgotEmailAddress" have the text "Forgot your email address?" displayed
	And I should see "#signup" have the text "Don't have an account?" displayed
	
Login Page Username Textbox Displayed
	[Tags]		LoginPageElements	Mobile
	Then I should see the element "#LoginUsername" displayed
	And I should see the element "#LoginUsername" blank

Login Page Password Textbox Displayed
	[Tags]		LoginPageElements	Mobile
	Then I should see the element "#LoginPassword" displayed
	And I should see the element "#LoginPassword" blank
	
I should NOT see the unified navigation bar Displayed
	[Tags]		LoginPageElements	Mobile
	Then I should not see the element ".myblue-header-content .thirdparty" displayed
	
I should see Benefits under the login form
	[Tags]		LoginPageElements
	Then I should see the element "#benefitsFeatures" displayed
	
I should see Resources under the login form
	[Tags]		LoginPageElements
	Then I should see the element "#resourcesFeatures" displayed
	
I should see Health Assessment under the login form
	[Tags]		LoginPageElements
	Then I should see the element "#healthFeatures" displayed
	
I should see FAQ under the login form
	[Tags]		LoginPageElements
	Then I should see the element "#faqFeatures" displayed
	
I should see Benefits have valid text under the login form
	[Tags]		LoginPageElements
	Then I should see "#benefitsFeatures h3" have the text "Benefits" displayed
	And I should see "#benefitsFeatures p" have the text "It's easy and affordable to make healthy choices. Discover the benefits and personalized services available to your family." displayed
	
I should see Resources have valid text under the login form
	[Tags]		LoginPageElements
	Then I should see "#resourcesFeatures h3" have the text "Resources" displayed
	Then I should see "#resourcesFeatures p" have the text "Get access to your statements, health records, provider directories, real-time nurse chats and more." displayed
	
I should see Health Assessment have valid text under the login form
	[Tags]		LoginPageElements
	Then I should see "#healthFeatures h3" have the text "Health Assessment" displayed
	Then I should see "#healthFeatures p" have the text "What are your health goals? Take the Blue Health Assessment to reach them now." displayed
	
I should see FAQ have valid text under the login form
	[Tags]		LoginPageElements
	Then I should see "#faqFeatures h3" have the text "FAQs" displayed
	
I should see a CVS logo
	[Tags]		LoginPageElements
	Then I should see the element "#CVS" displayed
	
I should see a WebMD logo
	[Tags]		LoginPageElements
	Then I should see the element "#WebMD" displayed
	
I should see an eService
	[Tags]		LoginPageElements
	Then I should see the element "#MyBlueCS" displayed
	Teardown Browser
	
	

Valid Login
	[Tags]		ValidLoginTest	Mobile
    Given I am a MyBlue Member on the Login Page
    When I Enter A Username "#LoginUsername" "marchcontractuat"
    And I Enter A Password "#LoginPassword" "Bigfun21!"
    And I Click the "#login" Button
    Sleep				${NAVIGATION}
    Then I Am Navigated to Landing Page "div.myblue-header-content"
    Teardown Browser
        
        
Invalid Login With Invalid Password
	[Tags]		InvalidLoginTest	Mobile
    Given I am a MyBlue Member on the Login Page
    When I Enter A Username "#LoginUsername" "marchcontractuat"
    And I Enter A Password "#LoginPassword" "testPassword"
    And I Click the "#login" Button
    Sleep				${NAVIGATION}
    Then I Am Not Navigated to Landing Page "header[ng-show=\"page.header.visible\"]"
    And I should see the element "#errorMsg" displayed
    Teardown Browser


Invalid Login With Invalid Username
	[Tags]		InvalidLoginTest	Mobile
    Given I am a MyBlue Member on the Login Page
    When I Enter A Username "#LoginUsername" "testUserName"
    And I Enter A Password "#LoginPassword" "marchcontractuat"
    And I Click the "#login" Button
    Sleep				${NAVIGATION}
    Then I Am Not Navigated to Landing Page "header[ng-show=\"page.header.visible\"]"
    And I should see the element "#errorMsg" displayed
    Teardown Browser
	
I should see the loading popup when I click submit to login
	[Tags]		Loading		Mobile
	Given I am a MyBlue Member navigating to the login page
    Sleep				${NAVIGATION}
    When I Enter A Username "#LoginUsername" "marchcontractuat"
    And I Enter A Password "#LoginPassword" "Bigfun21!"
    And I Click the "#login" Button	
    I should see the loading popup visible
    Teardown Browser
    
    
#US369 - Forgot Username
Login Page Hot links Displayed
	[Tags]		ForgotUsername	Mobile
	Given I am a MyBlue Member on the Login Page
	When I click the "#forgotUsername" link
	Then I navigate to "${SERVER}/forgot/username"

I should see an email textbox
	[Tags]		ForgotUsername	Mobile
	Then I should see the element "#emailAddress" displayed
	
I should see a submit button
	[Tags]		ForgotUsername	Mobile
	Then I should see the element "#retrieveUsername" displayed
	
I should see a cancel button
	[Tags]		ForgotUsername	Mobile
	Then I should see the element "div.cancel" displayed
	
I should not see a disabled submit button when I enter a valid email address
	[Tags]		ForgotUsername	Mobile
	When I enter the text "a@a.c" in "#emailAddress" textbox
	Then I should not see the element "#retrieveUsername[disabled=\"disabled\"]" displayed
	
I should not see the modal when I click cancel
	[Tags]		ForgotUsername	Mobile
	When I click the "div.cancel a" link
	Then I navigate to "${SERVER}/login"
	Teardown Browser


#US1638 & US1610 - Forgot email
I should be navigated to the forgot email page
	[Tags]		ForgotEmailAddress
	Given I am a MyBlue Member navigating to the login page
    Sleep				${NAVIGATION}
    When I click the "#forgotEmailAddress" link
    Then I should be navigated to "${SERVER}/forgot/email-address"
    
I should see a member id field
	[Tags]		ForgotEmailAddress
    Then I should see the element "input[name=\"memberId\"]" displayed
    
I should see a first name field
	[Tags]		ForgotEmailAddress
    Then I should see the element "input[name=\"firstName\"]" displayed
    
I should see a last name field
	[Tags]		ForgotEmailAddress
    Then I should see the element "input[name=\"lastName\"]" displayed
    
I should see a middle name field
	[Tags]		ForgotEmailAddress
    Then I should see the element "input[name=\"mi\"]" displayed    
    
I should see a dob field
	[Tags]		ForgotEmailAddress
    Then I should see the element "input[name=\"dob\"]" displayed      
    
I should see a reset email button
	[Tags]		ForgotEmailAddress
    Then I should see the element "#resetEmail" displayed      
    
I should see a retrieve email button
	[Tags]		ForgotEmailAddress
    Then I should see the element "#retrieveEmail" displayed   
    
I should see a cancel button
	[Tags]		ForgotEmailAddress
    Then I should see the element ".cancel" displayed   
    
When I click cancel I should be taken to the login page
	[Tags]		ForgotEmailAddress
	When I click the ".cancel a" link
    Then I should be navigated to "${SERVER}/login"
    Teardown Browser
