*** Settings ***
Documentation     Test Suite for the App Management Page.
...
...               This test is functionally identical to the example in
...               valid_login.txt file.
Resource       ../../../keywords/apps/manager/resource.txt
Suite Setup		Valid Login
Suite Teardown     Close Browser

*** Test Cases ***
App Manager Should Contain All Apps
	[Tags]	prod_only
    Go To App Management Page
    Check The Amount of Apps on App Manager	24

App Manager Should Contain All Apps
	[Tags]	qa_only
    Go To App Management Page
    Check The Amount of Apps on App Manager	26

App Manager Should Contain Drop Down
	[Tags]	qa_only
	Page Should Contain Element 	//div[@class='btn-group bootstrap-select ng-pristine ng-valid customDropdown']

App Manager Should Have the Right Amount of Category
	[Tags]	qa_only
    Xpath Should Match X Times    //ul[@class='dropdown-menu inner selectpicker']/li    10

App Manager Drop Should Contain All Categories
    [Tags]	qa_only
    [Documentation]     Verifies that all categories exists within the drop down
    : FOR   ${Element}  IN  @{CATEGORIES}
    \	${index}=   Get Index From List     ${CATEGORIES}     ${Element}
   	\	Execute Javascript 	window.jQuery1_9_1('.selectpicker').selectpicker('val', ${index});
   	\ 	${select}=	Get Currently Selected Category
   	\	Should Be Equal 	${Element}	${select}

App Manager Category Contains the Correct Count of Apps
    [Tags]	qa_only
    [Documentation]     Verifies that all categories exists within the drop down
    ${APP_COUNT}    Create Dictionary    View All Apps    26    Body Measurement    11    Dr. Visit    1    Fitness    14    Lifestyle    1    Medication    1    Mood    1    Nutrition    12    Sleep    3    Weight    11

    Go To App Management Page
    : FOR   ${Element}  IN  @{CATEGORIES}
    \	${index}=   Get Index From List     ${CATEGORIES}     ${Element}
   	\	Execute Javascript 	window.jQuery1_9_1('.selectpicker').selectpicker('val', ${index});
   	\ 	${select}=	Get Currently Selected Category
    \   ${app_value}  Get From Dictionary   ${APP_COUNT}  ${Element}
   	\   Should Be Equal 	${Element}	${select}
    \   Xpath Should Match X Times    //div[@class='additionalappsContainer']/div    ${app_value}

Connecting an App on the App Manager Page - Fitbit
    [Tags]  beta
    Connect App   fitbit
    Wait Until Keyword Succeeds    50s    5s    Welcome Page Should Be Open
